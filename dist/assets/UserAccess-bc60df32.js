import{r as n,g as y,j as r,b as s,K as C,p as H,M as A}from"./index-cc45eb6b.js";const z=()=>{const[M,x]=n.useState([]),[d,b]=n.useState([]),[p,L]=n.useState([]),[R,u]=n.useState(!1),[j,f]=n.useState(!1),[w,k]=n.useState(!1),[c,m]=n.useState({id:null,role:"",access_area:[]}),[l,g]=n.useState({userId:null,role:"",customAreas:[],roleAreas:[]});n.useEffect(()=>{h(),v(),U()},[]);const U=async()=>{L(["dashboard","chat","payment","money","nas","websiteContact","users"])},h=async()=>{var e,t;try{const a=await y("/v1/users-access");console.log("Users response:",a),a!=null&&a.data&&Array.isArray(a.data)?x(a.data):(console.error("Invalid users response:",a),x([]))}catch(a){console.error("Error fetching users:",a),alert("Failed to fetch users: "+(((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.message)),x([])}},v=async()=>{var e,t;try{const a=await y("/v1/user-access");console.log("Roles response:",a),a!=null&&a.data&&Array.isArray(a.data)?b(a.data):(console.error("Invalid roles response:",a),b([]))}catch(a){console.error("Error fetching roles:",a),alert("Failed to fetch roles: "+(((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.message)),b([])}},_=e=>{m(t=>({...t,access_area:t.access_area.includes(e)?t.access_area.filter(a=>a!==e):[...t.access_area,e]}))},N=async()=>{w?await C(`/v1/user-access/${c.id}`,c):await H("/v1/user-access",c),u(!1),m({id:null,role:"",access_area:[]}),await v(),await h()},W=async()=>{const e=d.find(o=>o.role===l.role),t=e?e.access_area:[],a=l.customAreas.filter(o=>!t.includes(o));await C(`/v1/users-access/${l.userId}`,{role:l.role,customAreas:a}),f(!1),g({userId:null,role:"",customAreas:[],roleAreas:[]}),h()},B=async e=>{confirm("Delete this user? This action cannot be undone.")&&(await A(`/v1/users-access/${e}`),h())},D=e=>{const t=d.find(o=>o.role===e.userRole),a=t?t.access_area:[];g({userId:e.userId,role:e.userRole,customAreas:e.access_area||[],roleAreas:a}),f(!0)},E=e=>{g(t=>({...t,customAreas:t.customAreas.includes(e)?t.customAreas.filter(a=>a!==e):[...t.customAreas,e]}))},S=e=>{m(e),k(!0),u(!0)},V=async e=>{confirm("Delete this role?")&&(await A(`/v1/user-access/${e}`),await v(),await h())},I=()=>{m({id:null,role:"",access_area:[]}),k(!1),u(!0)};return r("div",{className:"space-y-6",children:[s("div",{className:"flex items-center justify-between",children:r("div",{children:[s("h2",{className:"text-2xl font-bold",children:"Access Control"}),s("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Manage user roles and permissions"})]})}),r("div",{className:"panel",children:[s("div",{className:"flex items-center justify-between mb-6",children:r("div",{className:"flex items-center gap-3",children:[s("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:s("svg",{className:"w-6 h-6 text-primary",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M17 20C17 18.3431 14.7614 17 12 17C9.23858 17 7 18.3431 7 20M21 17.0004C21 15.7702 19.7659 14.7129 18 14.25M3 17.0004C3 15.7702 4.2341 14.7129 6 14.25M18 10.2361C18.6137 9.68679 19 8.8885 19 8C19 6.34315 17.6569 5 16 5C15.2316 5 14.5308 5.28885 14 5.76389M6 10.2361C5.38625 9.68679 5 8.8885 5 8C5 6.34315 6.34315 5 8 5C8.76835 5 9.46924 5.28885 10 5.76389M12 14C10.3431 14 9 12.6569 9 11C9 9.34315 10.3431 8 12 8C13.6569 8 15 9.34315 15 11C15 12.6569 13.6569 14 12 14Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})}),r("div",{children:[s("h5",{className:"font-semibold text-lg",children:"Users"}),s("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Assign roles to users"})]})]})}),r("div",{className:"overflow-x-auto pb-4 custom-scrollbar",children:[s("style",{children:`
                        .custom-scrollbar::-webkit-scrollbar {
                            height: 6px;
                        }
                        .custom-scrollbar::-webkit-scrollbar-track {
                            background: transparent;
                            margin: 0 10px;
                        }
                        .custom-scrollbar::-webkit-scrollbar-thumb {
                            background: linear-gradient(90deg, #4361ee 0%, #7c3aed 100%);
                            border-radius: 20px;
                            transition: all 0.3s ease;
                        }
                        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                            background: linear-gradient(90deg, #3451d1 0%, #6d28d9 100%);
                            height: 8px;
                        }
                        .dark .custom-scrollbar::-webkit-scrollbar-thumb {
                            background: linear-gradient(90deg, #4361ee 0%, #7c3aed 100%);
                            box-shadow: 0 0 10px rgba(67, 97, 238, 0.3);
                        }
                        .custom-scrollbar {
                            scrollbar-width: thin;
                            scrollbar-color: #4361ee transparent;
                        }
                    `}),s("div",{className:"flex gap-4",children:M.map(e=>{var t,a,o;return r("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-lg transition-shadow flex flex-col w-80 flex-shrink-0",children:[r("div",{className:"flex-1",children:[s("div",{className:"flex items-start justify-between mb-3",children:r("div",{className:"flex items-center gap-3",children:[r("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center text-white font-semibold text-lg",children:[(t=e.userFirstName)==null?void 0:t.charAt(0),(a=e.userLastName)==null?void 0:a.charAt(0)]}),r("div",{children:[r("h6",{className:"font-semibold",children:[e.userFirstName," ",e.userLastName]}),s("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.userEmail})]})]})}),s("div",{className:"mb-3",children:r("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-info/10 text-info",children:[r("svg",{className:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M12 22C17 22 22 17 22 12C22 7 17 2 12 2C7 2 2 7 2 12C2 17 7 22 12 22Z",stroke:"currentColor",strokeWidth:"1.5"})]}),e.userRole||"No Role"]})}),r("div",{className:"mb-3",children:[s("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Access Areas:"}),s("div",{className:"flex flex-wrap gap-1",children:((o=e.access_area)==null?void 0:o.length)>0?e.access_area.map(i=>s("span",{className:"px-2 py-1 rounded text-xs bg-primary/10 text-primary",children:i},i)):s("span",{className:"text-xs text-gray-400",children:"No access"})})]})]}),r("div",{className:"flex gap-2 mt-auto",children:[r("button",{className:"btn btn-sm btn-primary flex-1",onClick:()=>D(e),children:[s("svg",{className:"w-4 h-4 mr-1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor",strokeWidth:"1.5"})}),"Change Role"]}),s("button",{className:"btn btn-sm btn-danger",onClick:()=>B(e.userId),title:"Delete User",children:s("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M19 7L18.1327 19.1425C18.0579 20.1891 17.187 21 16.1378 21H7.86224C6.81296 21 5.94208 20.1891 5.86732 19.1425L5 7M10 11V17M14 11V17M15 7V4C15 3.44772 14.5523 3 14 3H10C9.44772 3 9 3.44772 9 4V7M4 7H20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]},e.userId)})})]})]}),r("div",{className:"panel",children:[r("div",{className:"flex items-center justify-between mb-6",children:[r("div",{className:"flex items-center gap-3",children:[s("div",{className:"w-10 h-10 rounded-lg bg-success/10 flex items-center justify-center",children:s("svg",{className:"w-6 h-6 text-success",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M9 12.75L11.25 15L15 9.75M21 12C21 13.1819 20.7672 14.3522 20.3149 15.4442C19.8626 16.5361 19.1997 17.5282 18.364 18.364C17.5282 19.1997 16.5361 19.8626 15.4442 20.3149C14.3522 20.7672 13.1819 21 12 21C10.8181 21 9.64778 20.7672 8.55585 20.3149C7.46392 19.8626 6.47177 19.1997 5.63604 18.364C4.80031 17.5282 4.13738 16.5361 3.68508 15.4442C3.23279 14.3522 3 13.1819 3 12C3 9.61305 3.94821 7.32387 5.63604 5.63604C7.32387 3.94821 9.61305 3 12 3C14.3869 3 16.6761 3.94821 18.364 5.63604C20.0518 7.32387 21 9.61305 21 12Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),r("div",{children:[s("h5",{className:"font-semibold text-lg",children:"Roles"}),s("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Define roles and permissions"})]})]}),r("button",{className:"btn btn-primary",onClick:I,children:[s("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M12 5V19M5 12H19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),"Add Role"]})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(e=>r("div",{className:"relative border border-gray-200 dark:border-gray-700 rounded-xl p-5 hover:shadow-xl transition-all bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 overflow-hidden",children:[s("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-success/10 to-transparent rounded-full -mr-16 -mt-16"}),r("div",{className:"relative",children:[r("div",{className:"flex items-start justify-between mb-4",children:[r("div",{className:"flex items-center gap-3",children:[s("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-success to-emerald-600 flex items-center justify-center shadow-lg",children:s("svg",{className:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M9 12.75L11.25 15L15 9.75M21 12C21 13.1819 20.7672 14.3522 20.3149 15.4442C19.8626 16.5361 19.1997 17.5282 18.364 18.364C17.5282 19.1997 16.5361 19.8626 15.4442 20.3149C14.3522 20.7672 13.1819 21 12 21C10.8181 21 9.64778 20.7672 8.55585 20.3149C7.46392 19.8626 6.47177 19.1997 5.63604 18.364C4.80031 17.5282 4.13738 16.5361 3.68508 15.4442C3.23279 14.3522 3 13.1819 3 12C3 9.61305 3.94821 7.32387 5.63604 5.63604C7.32387 3.94821 9.61305 3 12 3C14.3869 3 16.6761 3.94821 18.364 5.63604C20.0518 7.32387 21 9.61305 21 12Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),r("div",{children:[s("h6",{className:"font-bold text-xl mb-1 bg-gradient-to-r from-success to-emerald-600 bg-clip-text text-transparent",children:e.role}),r("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:[e.access_area.length," permissions granted"]})]})]}),r("div",{className:"flex gap-2",children:[s("button",{className:"p-2 rounded-lg hover:bg-primary/10 text-primary transition-all hover:scale-110",onClick:()=>S(e),title:"Edit",children:s("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M15.2322 5.23223L18.7677 8.76777M16.7322 3.73223C17.7085 2.75592 19.2914 2.75592 20.2677 3.73223C21.244 4.70854 21.244 6.29146 20.2677 7.26777L6.5 21.0355H3V17.4644L16.7322 3.73223Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),s("button",{className:"p-2 rounded-lg hover:bg-danger/10 text-danger transition-all hover:scale-110",onClick:()=>V(e.id),title:"Delete",children:s("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M19 7L18.1327 19.1425C18.0579 20.1891 17.187 21 16.1378 21H7.86224C6.81296 21 5.94208 20.1891 5.86732 19.1425L5 7M10 11V17M14 11V17M15 7V4C15 3.44772 14.5523 3 14 3H10C9.44772 3 9 3.44772 9 4V7M4 7H20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),r("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-3 backdrop-blur-sm",children:[s("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2 uppercase tracking-wide",children:"Permissions:"}),s("div",{className:"flex flex-wrap gap-2",children:e.access_area.map(t=>s("span",{className:"px-3 py-1.5 rounded-lg text-xs font-semibold bg-gradient-to-r from-success to-emerald-600 text-white shadow-md capitalize",children:t},t))})]})]})]},e.id))})]}),R&&s("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",onKeyDown:e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),N())},children:[r("div",{className:"bg-gradient-to-r from-primary to-purple-600 p-6",children:[s("h3",{className:"text-2xl font-bold text-white",children:w?"Edit Role":"Create New Role"}),s("p",{className:"text-white/80 text-sm mt-1",children:"Define role name and assign permissions"})]}),r("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[r("div",{className:"mb-6",children:[s("label",{className:"block text-sm font-semibold mb-2",children:"Role Name"}),s("input",{type:"text",className:"form-input w-full",placeholder:"e.g., Manager, Editor, Viewer",value:c.role,onChange:e=>m({...c,role:e.target.value}),onKeyDown:e=>{e.key==="Enter"&&(e.preventDefault(),N())}})]}),r("div",{children:[s("label",{className:"block text-sm font-semibold mb-3",children:"Permissions"}),s("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:p.map(e=>r("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition-all ${c.access_area.includes(e)?"border-primary bg-primary/5":"border-gray-200 dark:border-gray-700 hover:border-primary/50"}`,children:[s("input",{type:"checkbox",className:"form-checkbox text-primary",checked:c.access_area.includes(e),onChange:()=>_(e)}),s("span",{className:"ml-2 capitalize font-medium text-sm",children:e})]},e))})]})]}),r("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[s("button",{className:"btn btn-outline-danger",onClick:()=>u(!1),children:"Cancel"}),r("button",{className:"btn btn-primary",onClick:N,children:[s("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M5 13L9 17L19 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),w?"Update Role":"Create Role"]})]})]})}),j&&s("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md",children:[r("div",{className:"bg-gradient-to-r from-info to-blue-600 p-6",children:[s("h3",{className:"text-2xl font-bold text-white",children:"Change User Role"}),s("p",{className:"text-white/80 text-sm mt-1",children:"Assign a new role to this user"})]}),r("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-250px)]",children:[r("div",{className:"mb-6",children:[s("label",{className:"block text-sm font-semibold mb-2",children:"Select Role"}),r("select",{className:"form-select w-full",value:l.role,onChange:e=>{const t=d.find(i=>i.role===e.target.value),a=t?t.access_area:[],o=l.customAreas.filter(i=>a.includes(i));g({...l,role:e.target.value,roleAreas:a,customAreas:o})},children:[s("option",{value:"",children:"Choose a role..."}),d.map(e=>s("option",{value:e.role,children:e.role},e.id))]})]}),r("div",{children:[s("label",{className:"block text-sm font-semibold mb-3",children:"Role Permissions"}),s("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Permissions from assigned role (read-only)"}),r("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[l.roleAreas.map(e=>r("div",{className:"flex items-center p-3 border-2 border-success/30 bg-success/5 rounded-lg",children:[s("svg",{className:"w-4 h-4 text-success mr-2",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M5 13L9 17L19 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{className:"capitalize font-medium text-sm text-success",children:e})]},e)),l.roleAreas.length===0&&s("p",{className:"text-xs text-gray-400 col-span-2",children:"No role assigned"})]}),s("label",{className:"block text-sm font-semibold mb-3",children:"Additional Permissions"}),s("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Add extra permissions beyond role access"}),r("div",{className:"grid grid-cols-2 gap-3",children:[p.filter(e=>!l.roleAreas.includes(e)).map(e=>{const t=l.customAreas.includes(e);return r("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition-all ${t?"border-primary bg-primary/5":"border-gray-200 dark:border-gray-700 hover:border-primary/50"}`,children:[s("input",{type:"checkbox",className:"form-checkbox text-primary",checked:t,onChange:()=>E(e)}),s("span",{className:"ml-2 capitalize font-medium text-sm",children:e})]},e)}),p.filter(e=>!l.roleAreas.includes(e)).length===0&&s("p",{className:"text-xs text-gray-400 col-span-2",children:"All permissions already granted by role"})]})]})]}),r("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[s("button",{className:"btn btn-outline-danger",onClick:()=>f(!1),children:"Cancel"}),r("button",{className:"btn btn-primary",onClick:W,children:[s("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M5 13L9 17L19 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Update Role"]})]})]})})]})};export{z as default};
