import{r as c,u as X,s as Z,j as s,b as e,L as C,g as y,p as f,S as h}from"./index-ed880de9.js";import{c as g,e as d,a as ee,F as N,b as k,d as o}from"./object-358738a0.js";import{M as te}from"./reactTextMask-b6b7a740.js";import{S as F}from"./react-select.esm-4d614607.js";import{F as ae}from"./flatpickr-9c192d17.js";import{Y as p,y as v}from"./transition-d5da5cef.js";import"./_defineProperty-abd8745d.js";import"./_baseIsEqual-6d42c7c7.js";import"./floating-ui.dom.browser.min-e93d2b51.js";import"./keyboard-f018fe7a.js";import"./open-closed-2b5cf966.js";import"./hidden-fe082d6f.js";const ye=()=>{const m={"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("accessToken")},[S,P]=c.useState([]),[I,E]=c.useState([]),[L,M]=c.useState([]),[b,u]=c.useState(!1),[w,x]=c.useState(!1),[j,q]=c.useState(""),[B,G]=c.useState(!1),[V,A]=c.useState([{value:"",label:""}]),[U,_]=c.useState([{value:"",label:""}]),T=X();c.useEffect(()=>{const t=async()=>{const i=await y("/v1/money/getBanks",{},m);P(i)},a=async()=>{const i=await y("/v1/money/getUsers",{},m);E(i)};t(),a(),T(Z("Money"))},[T]);const R=async t=>{const a=await y("/v1/money/getPaymentMethods",{bankId:t},m);M(a)},Y=async(t,a)=>{const i=await f("/v1/money/saveTransection",t,{},m),l=h.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3});i.success?(l.fire({icon:"success",title:i.message,padding:"10px 20px"}),a()):l.fire({icon:"error",title:i.message,padding:"10px 20px"})},$=async(t,a)=>{const i=await f("/v1/payment/payment-link/create",t,{},m),l=h.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3});i.success?(l.fire({icon:"success",title:i.message,padding:"10px 20px"}),a()):l.fire({icon:"error",title:i.message,padding:"10px 20px"})},z=async()=>{const t=await y("/v1/contact/get",{},m),a=h.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3});if(t.success){let i=t.contacts.map(l=>({value:l.id,label:`${l.firstName} ${l.lastName}`.trim()}));A(i)}else a.fire({icon:"error",title:t.message,padding:"10px 20px"})},D=async()=>{const t=await y("/v1/payment/types",{},m),a=h.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3});if(t.success){let i=Object.entries(t.data).map(([l,r])=>({value:l,label:l.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())+"- Prefix: "+r}));_(i)}else a.fire({icon:"error",title:t.message,padding:"10px 20px"})},Q=async(t,a)=>{const i=await f("/v1/2fa/verify",t,{},m),l=h.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3});i.success&&i.verify?(l.fire({icon:"success",title:i.message,padding:"10px 20px"}),a(),u(!1),z(),D(),G(!0)):l.fire({icon:"error",title:i.message,padding:"10px 20px"})},H=async()=>{const t=await f("/v1/2fa/create",{},{},m),a=h.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3});t.success?(q(t.qrUrl),x(!0)):a.fire({icon:"error",title:t.message,padding:"10px 20px"})},O=g().shape({title:d().required("Please Enter the title"),amount:d().required("Please Enter the amount"),userId:d().required("Please Select the user"),bank:d().required("Please Select the bank"),method:d().required("Please Select the method")}),J=g().shape({linkPurpose:d().required("Please Enter the title"),linkExpiryTime:d().required("Please Enter the time"),contactId:d().required("Please Select the person"),linkType:d().required("Please Select the linkType"),amount:d().required("Please Select the amount")}),K=g().shape({code:ee().min(6).required("Please Enter the code")}),W=({field:t,form:a,mask:i,...l})=>e(te,{...t,...l,mask:i,onChange:r=>a.setFieldValue(t.name,r.target.value)});return s("div",{children:[s("ul",{className:"flex space-x-2 rtl:space-x-reverse",children:[e("li",{children:e(C,{to:"#",className:"text-primary hover:underline",children:"Forms"})}),e("li",{className:"before:content-['/'] ltr:before:mr-2 rtl:before:ml-2",children:e("span",{children:"Money Manage"})})]}),e("div",{className:"pt-5 space-y-8",children:s("div",{className:"grid grid-cols-2 xl:grid-cols-2 gap-6",children:[s("div",{className:"panel",id:"custom_styles",children:[e("div",{className:"flex items-center justify-between mb-5",children:e("h5",{className:"font-semibold text-lg dark:text-white-light",children:"Add Transactions"})}),e("div",{className:"mb-5",children:e(N,{initialValues:{title:"",amount:"",userId:"",bank:"",method:"",agree:!1},validationSchema:O,onSubmit:(t,{resetForm:a})=>{Y(t,a)},children:({errors:t,submitCount:a,touched:i,values:l,setFieldValue:r})=>s(k,{className:"space-y-5",children:[s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:[s("div",{className:a?t.title?"has-error":"has-success":"",children:[e("label",{htmlFor:"title",children:"Transaction Title"}),e(o,{name:"title",type:"text",id:"title",placeholder:"Enter Transaction Title",className:"form-input"}),a&&t.title?e("div",{className:"text-danger mt-1",children:t.title}):a?e("div",{className:"text-success mt-1",children:"Looks Good!"}):""]}),s("div",{className:a?t.amount?"has-error":"has-success":"",children:[e("label",{htmlFor:"amount",children:"Transaction Amount"}),e(o,{name:"amount",type:"text",id:"amount",placeholder:"Enter Transaction Amount",className:"form-input"}),a&&t.amount?e("div",{className:"text-danger mt-1",children:t.amount}):a?e("div",{className:"text-success mt-1",children:"Looks Good!"}):""]}),s("div",{className:a?t.userId?"has-error":"has-success":"",children:[e("label",{htmlFor:"userId",children:"Username"}),s(o,{as:"select",name:"userId",className:"form-select",children:[e("option",{value:"",disabled:!0,children:"Select User"}),I.map(n=>e("option",{value:n.userId,children:n.userFirstName+" "+n.userLastName},n.userId))]}),a&&t.userId?e("div",{className:"text-danger mt-1",children:t.userId}):a?e("div",{className:"text-success mt-1",children:"Looks Good!"}):""]})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[s("div",{className:a?t.bank?"has-error":"has-success":"",children:[s(o,{as:"select",name:"bank",className:"form-select",value:l.bank,onChange:n=>{r("bank",n.target.value),R(n.target.value)},children:[e("option",{value:"",disabled:!0,children:"Select Bank"}),S.map(n=>e("option",{value:n.bankId,children:n.bankName},n.bankId))]}),a&&t.bank?e("div",{className:"text-danger mt-1",children:t.bank}):a?e("div",{className:"text-success mt-1",children:"Looks Good!"}):""]}),s("div",{className:a?t.method?"has-error":"has-success":"",children:[s(o,{as:"select",name:"method",className:"form-select",value:l.method,children:[e("option",{value:"",disabled:!0,children:"Select Payment Method"}),L.map(n=>e("option",{value:n.paymentMethodId,children:n.paymentMethodName},n.paymentMethodId))]}),a&&t.method?e("div",{className:"text-danger mt-1",children:t.method}):a?e("div",{className:"text-success mt-1",children:"Looks Good!"}):""]})]}),s("div",{className:a?t.agree?"has-error":"has-success":"",children:[s("div",{className:"flex",children:[e(o,{name:"agree",id:"agree",type:"checkbox",className:"form-checkbox"}),e("label",{htmlFor:"agree",className:"text-white-dark font-semibold ml-2",children:"Income Transaction"})]}),a&&t.agree?e("div",{className:"text-danger mt-1",children:t.agree}):""]}),e("button",{type:"submit",className:"btn btn-primary !mt-6",children:"Submit Form"})]})})})]}),s("div",{className:"panel",id:"custom_styles",children:[e("div",{className:"flex items-center justify-between mb-5",children:e("h5",{className:"font-semibold text-lg dark:text-white-light",children:"Create Payment Link"})}),B?e("div",{className:"mb-5",children:e(N,{initialValues:{linkPurpose:"",linkExpiryTime:"",contactId:"",linkType:"",amount:"",linkNotify:{send_sms:!0,send_email:!0}},validationSchema:J,onSubmit:(t,{resetForm:a})=>{$(t,a)},children:({errors:t,submitCount:a,touched:i,values:l,setFieldValue:r})=>s(k,{className:"space-y-5",children:[s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:[s("div",{className:a?t.linkPurpose?"has-error":"has-success":"",children:[e("label",{htmlFor:"linkPurpose",children:"Payment For"}),e(o,{name:"linkPurpose",type:"text",id:"linkPurpose",placeholder:"Enter Transaction Title",className:"form-input"}),a&&t.linkPurpose?e("div",{className:"text-danger mt-1",children:t.linkPurpose}):a?e("div",{className:"text-success mt-1",children:"Looks Good!"}):""]}),s("div",{className:a?t.amount?"has-error":"has-success":"",children:[e("label",{htmlFor:"amount",children:"Payment Amount"}),e(o,{name:"amount",type:"text",id:"amount",placeholder:"Enter Transaction Amount",className:"form-input"}),a&&t.amount?e("div",{className:"text-danger mt-1",children:t.amount}):a?e("div",{className:"text-success mt-1",children:"Looks Good!"}):""]}),s("div",{className:a?t.contactId?"has-error custom-select":"has-success custom-select":"custom-select",children:[e("label",{htmlFor:"contactId",children:"Person"}),e(F,{name:"contactId",id:"contactId",placeholder:"Select person",options:V,onChange:n=>r("contactId",n.value)}),a&&t.contactId?e("div",{className:"text-danger mt-1",children:t.contactId}):a?e("div",{className:"text-success mt-1",children:"Looks Good!"}):""]}),s("div",{className:a?t.linkType?"has-error custom-select":"has-success custom-select":"custom-select",children:[e("label",{htmlFor:"linkType",children:"Link Type"}),e(F,{name:"linkType",id:"linkType",placeholder:"Select payment type",options:U,onChange:n=>r("linkType",n.value)}),a&&t.linkType?e("div",{className:"text-danger mt-1",children:t.linkType}):a?e("div",{className:"text-success mt-1",children:"Looks Good!"}):""]}),s("div",{className:(a?t.linkExpiryTime?"has-error":"has-success":"")+"custom-select",children:[e("label",{htmlFor:"linkExpiryTime",children:"Link Expiry"}),e(ae,{"data-enable-time":!0,options:{enableTime:!0,dateFormat:"Y-m-d H:i",position:"auto left"},name:"linkExpiryTime",id:"linkExpiryTime",className:"form-input",onChange:n=>r("linkExpiryTime",n[0])}),a&&t.linkExpiryTime?e("div",{className:"text-danger mt-1",children:t.linkExpiryTime}):a?e("div",{className:"text-success mt-1",children:"Looks Good!"}):""]}),s("div",{className:a?t.linkNotify?"has-error":"has-success":"",children:[e("label",{htmlFor:"linkNotify",children:"Send Notificaton"}),s("div",{className:"flex",children:[e(o,{name:"linkNotify.send_sms",id:"linkNotify",type:"checkbox",className:"form-checkbox"}),e("label",{htmlFor:"linkNotify.send_sms",className:"text-white-dark font-semibold",children:"SMS"}),e(o,{name:"linkNotify.send_email",id:"linkNotify",type:"checkbox",className:"form-checkbox ml-12"}),e("label",{htmlFor:"linkNotify.send_email",className:"text-white-dark font-semibold",children:"Email"})]}),a&&t.linkNotify?e("div",{className:"text-danger mt-1",children:t.linkNotify}):""]})]}),e("button",{type:"submit",className:"btn btn-primary !mt-6",children:"Submit Form"})]})})}):s("div",{className:"md-5",children:[s("div",{className:"flex items-center justify-center",children:[e("button",{type:"button",onClick:()=>H(),className:"btn btn-primary",children:"Register For 2FA"}),e("button",{type:"button",onClick:()=>u(!0),className:"btn btn-success ltr:ml-4 rtl:mr-4",children:"Verify Your Self"})]}),e(p,{appear:!0,show:b,as:c.Fragment,children:s(v,{as:"div",open:b,onClose:()=>u(!1),children:[e(p.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0"})}),e("div",{className:"fixed inset-0 bg-[black]/60 z-[999] overflow-y-auto",children:e("div",{className:"flex items-center justify-center min-h-screen px-4",children:e(p.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s(v.Panel,{as:"div",className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg my-8 text-black dark:text-white-dark",children:[s("div",{className:"flex bg-[#fbfbfb] dark:bg-[#121c2c] items-center justify-between px-5 py-3",children:[e("h5",{className:"font-bold text-lg",children:"2Fa Authentication"}),e("button",{type:"button",className:"text-white-dark hover:text-dark",onClick:()=>u(!1),children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",children:[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e("div",{className:"p-5",children:e(N,{initialValues:{code:""},validationSchema:K,onSubmit:(t,{resetForm:a})=>{Q(t,a)},children:({errors:t,submitCount:a,touched:i,values:l,setFieldValue:r})=>s(k,{className:"space-y-5",children:[e("div",{className:"grid grid-cols-1 md:grid-cols-1",children:s("div",{className:a?t.code?"has-error":"has-success":"",children:[e(o,{name:"code",id:"code",value:l.code,type:"text",placeholder:"Enter 2FA Code",className:"form-input",component:W,mask:[/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/]}),a&&t.code?e("div",{className:"text-danger mt-1",children:t.code}):a?e("div",{className:"text-success mt-1",children:"Looks Good!"}):""]})}),s("div",{className:"flex justify-end items-center mt-8",children:[e("button",{type:"submit",className:"btn btn-primary",children:"Verify"}),e("button",{type:"button",className:"btn btn-outline-danger ltr:ml-4 rtl:mr-4",onClick:()=>u(!1),children:"Discard"})]})]})})})]})})})})]})}),e(p,{appear:!0,show:w,as:c.Fragment,children:s(v,{as:"div",open:w,onClose:()=>x(!1),children:[e(p.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0"})}),e("div",{className:"fixed inset-0 bg-[black]/60 z-[999] overflow-y-auto",children:e("div",{className:"flex items-center justify-center min-h-screen px-4",children:e(p.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s(v.Panel,{as:"div",className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg my-8 text-black dark:text-white-dark",children:[s("div",{className:"flex bg-[#fbfbfb] dark:bg-[#121c2c] items-center justify-between px-5 py-3",children:[e("h5",{className:"font-bold text-lg",children:"2Fa Authentication"}),e("button",{type:"button",className:"text-white-dark hover:text-dark",onClick:()=>x(!1),children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",children:[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),s("div",{className:"p-5",children:[e("h5",{className:"text-md",children:"Scan QR In Google Authentocator App"}),e("br",{}),e("center",{children:e("img",{src:j})})]})]})})})})]})})]})]})]})})]})};export{ye as default};
