import{u as N,d as y,r as s,s as k,g as j,j as a,b as t,F as S}from"./index-121e1fd4.js";const E=()=>{const d=N(),h=y();s.useEffect(()=>{d(k("Website Contact"))});const[o,p]=s.useState([]),[i,u]=s.useState(""),[m,l]=s.useState([]),[g,b]=s.useState(null);s.useEffect(()=>{C()},[]);const C=async()=>{try{const e={"Content-Type":"application/json",authorization:"Bearer "+localStorage.getItem("accessToken")},r=await j("/v1/websiteContact/getContacts",{},e);p(r),l(r)}catch(e){console.error("Error fetching contacts:",e)}};s.useEffect(()=>{l(()=>o.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.email.toLowerCase().includes(i.toLowerCase())||e.phone&&e.phone.includes(i)))},[i,o]);const w=e=>new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),f=e=>{const r=e.match(/Subject:\s*(.+?)(?:\n|$)/i),n=e.match(/Message:\s*(.+)/is);return{subject:r?r[1].trim():"-",message:n?n[1].trim():e}},v=(e,r)=>{r.stopPropagation(),navigator.clipboard.writeText(e)},x=(e,r)=>{r.stopPropagation(),r.detail===1?navigator.clipboard.writeText(e):r.detail===2&&h("/apps/chat",{state:{phoneNumber:"+91"+e}})};return a("div",{children:[a("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[t("h2",{className:"text-xl",children:"Website Contact"}),a("div",{className:"relative",children:[t("input",{type:"text",placeholder:"Search Contacts",className:"form-input py-2 ltr:pr-11 rtl:pl-11 peer",value:i,onChange:e=>u(e.target.value)}),t("button",{type:"button",className:"absolute ltr:right-[11px] rtl:left-[11px] top-1/2 -translate-y-1/2 peer-focus:text-primary",children:a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t("circle",{cx:"11.5",cy:"11.5",r:"9.5",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.5"}),t("path",{d:"M18.5 18.5L22 22",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})})]})]}),t("div",{className:"mt-5 panel p-0 border-0 overflow-hidden",children:t("div",{className:"table-responsive",children:a("table",{className:"table-striped table-hover",children:[t("thead",{children:a("tr",{children:[t("th",{children:"ID"}),t("th",{children:"Name"}),t("th",{children:"Email"}),t("th",{children:"Phone"}),t("th",{children:"Subject"}),t("th",{children:"Date"})]})}),t("tbody",{children:m.map(e=>{const r=f(e.message),n=g===e.id;return a(S,{children:[a("tr",{onClick:()=>b(n?null:e.id),className:"cursor-pointer",children:[t("td",{children:e.id}),t("td",{children:e.name}),t("td",{children:t("span",{className:"badge bg-primary cursor-pointer hover:opacity-80",onClick:c=>v(e.email,c),children:e.email})}),t("td",{children:t("span",{className:"badge bg-success cursor-pointer hover:opacity-80",onClick:c=>x(e.phone||"",c),children:e.phone||"-"})}),t("td",{children:r.subject}),t("td",{className:"whitespace-nowrap",children:w(e.created_at)})]},e.id),n&&t("tr",{children:t("td",{colSpan:6,className:"!p-0",children:t("div",{className:"bg-white-light dark:bg-[#1b2e4b] p-6 border-t border-[#e0e6ed] dark:border-[#1b2e4b]",children:a("div",{className:"flex gap-4",children:[t("div",{className:"flex-none",children:t("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t("path",{d:"M2 12C2 8.22876 2 6.34315 3.17157 5.17157C4.34315 4 6.22876 4 10 4H14C17.7712 4 19.6569 4 20.8284 5.17157C22 6.34315 22 8.22876 22 12C22 15.7712 22 17.6569 20.8284 18.8284C19.6569 20 17.7712 20 14 20H10C6.22876 20 4.34315 20 3.17157 18.8284C2 17.6569 2 15.7712 2 12Z",stroke:"currentColor",strokeWidth:"1.5"}),t("path",{opacity:"0.5",d:"M6 8L8.1589 9.79908C9.99553 11.3296 10.9139 12.0949 12 12.0949C13.0861 12.0949 14.0045 11.3296 15.8411 9.79908L18 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})})}),a("div",{className:"flex-1",children:[t("div",{className:"text-sm font-semibold text-primary mb-2",children:"Message"}),t("div",{className:"text-base whitespace-pre-wrap leading-relaxed",children:r.message})]})]})})})},`${e.id}-expanded`)]})})})]})})})]})};export{E as default};
