import{r,u as R,S as y,s as q,j as s,b as e,L as E,g as L,p as v}from"./index-121e1fd4.js";import{d as P}from"./index-100fbe71.js";import{c as z,a as G,F as U,b as Y,d as H}from"./object-027e9f03.js";import{M as Q}from"./reactTextMask-197c9cbc.js";import{Y as m,y as h}from"./transition-bbde90ec.js";import"./_defineProperty-b176b198.js";import"./_baseIsEqual-c47be61e.js";import"./keyboard-504e4165.js";import"./open-closed-3e555428.js";import"./hidden-d0e4f790.js";const u={"Content-Type":"multipart/form-data",authorization:"Bearer "+localStorage.getItem("accessToken")},_=({name:o,icon:l,iconClass:n})=>e("center",{children:s("div",{children:[e("div",{className:n,dangerouslySetInnerHTML:{__html:l}}),e("strong",{children:o||"No Name"})]})}),se=()=>{const[o,l]=r.useState([]),[n,x]=r.useState([]),[b,p]=r.useState(!1),[F,C]=r.useState(!0),[N,f]=r.useState(!1),[S,T]=r.useState(""),w=R(),g=y.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3}),k=async()=>{const t=await L("/v1/nas/get",{},u);t.success?l([t.directoryTree]):g.fire({icon:"error",title:t.message,padding:"10px 20px"})};r.useEffect(()=>{k(),w(q("NAS"))},[w]);const D=async()=>{const t=await v("/v1/2fa/create",{},{},u),a=y.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3});t.success?(T(t.qrUrl),f(!0)):a.fire({icon:"error",title:t.message,padding:"10px 20px"})},j=async(t,a)=>{const i=await v("/v1/2fa/verify",t,{},u);i.success&&i.verify?(g.fire({icon:"success",title:i.message,padding:"10px 20px"}),a(),p(!1),C(!0),k()):g.fire({icon:"error",title:i.message,padding:"10px 20px"})},A=t=>{const a=o[t];a.type==="folder"?(x([...n,o]),l(a.children)):a.type==="back"&&n.length>0&&(l(n[n.length-1]),x(n.slice(0,-1)))},V=t=>{t.preventDefault();const a=t.dataTransfer.files;a.length>0&&I(a)},I=async t=>{const a=y.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3}),i=new FormData;for(let d=0;d<t.length;d++)i.append("file",t[d]);const c=await v("/v1/nas/uploadFile",i,{},u);a.fire({icon:c.type,title:c.message,padding:"10px 20px"})},B=z().shape({code:G().min(6).required("Please Enter the code")}),M=({field:t,form:a,mask:i,...c})=>e(Q,{...t,...c,mask:i,onChange:d=>a.setFieldValue(t.name,d.target.value)});return s("div",{children:[s("ul",{className:"flex space-x-2 rtl:space-x-reverse mb-6",children:[e("li",{children:e(E,{to:"#",className:"text-primary hover:underline",children:"Dashboard"})}),e("li",{className:"before:content-['/'] ltr:before:mr-2 rtl:before:ml-2",children:e("span",{children:"NAS - Jay Chauhan"})})]}),F?e("div",{className:"dragndrop space-y-8",children:e("div",{className:"dragndrop space-y-8",children:s("div",{className:"panel",children:[e("div",{className:"font-semibold text-lg dark:text-white mb-5",children:"Primary"}),e("div",{onDragOver:t=>t.preventDefault(),onDrop:V,children:e(P.ReactSortable,{list:o,setList:l,animation:200,className:"grid grid-cols-2 xs sm:grid-cols-4 md:grid-cols-8 gap-8 place-items-center",children:o.map((t,a)=>e("div",{className:"w-24 h-24 rounded-md shadow dark:border-dark flex items-center justify-center font-semibold cursor-grab",onClick:()=>A(a),children:e(_,{name:t.name,icon:t.iconSvg,iconClass:t.iconColorClass})},a))})})]})})}):s("div",{className:"md-5",children:[s("div",{className:"flex items-center justify-center",children:[e("button",{type:"button",onClick:()=>D(),className:"btn btn-primary",children:"Register For 2FA"}),e("button",{type:"button",onClick:()=>p(!0),className:"btn btn-success ltr:ml-4 rtl:mr-4",children:"Verify Your Self"})]}),e(m,{appear:!0,show:b,as:r.Fragment,children:s(h,{as:"div",open:b,onClose:()=>p(!1),children:[e(m.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0"})}),e("div",{className:"fixed inset-0 bg-[black]/60 z-[999] overflow-y-auto",children:e("div",{className:"flex items-center justify-center min-h-screen px-4",children:e(m.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s(h.Panel,{as:"div",className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg my-8 text-black dark:text-white-dark",children:[s("div",{className:"flex bg-[#fbfbfb] dark:bg-[#121c2c] items-center justify-between px-5 py-3",children:[e("h5",{className:"font-bold text-lg",children:"2Fa Authentication"}),e("button",{type:"button",className:"text-white-dark hover:text-dark",onClick:()=>p(!1),children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",children:[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e("div",{className:"p-5",children:e(U,{initialValues:{code:""},validationSchema:B,onSubmit:(t,{resetForm:a})=>{j(t,a)},children:({errors:t,submitCount:a,touched:i,values:c,setFieldValue:d})=>s(Y,{className:"space-y-5",children:[e("div",{className:"grid grid-cols-1 md:grid-cols-1",children:s("div",{className:a?t.code?"has-error":"has-success":"",children:[e(H,{name:"code",id:"code",value:c.code,type:"text",placeholder:"Enter 2FA Code",className:"form-input",component:M,mask:[/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/,/[0-9]/]}),a&&t.code?e("div",{className:"text-danger mt-1",children:t.code}):a?e("div",{className:"text-success mt-1",children:"Looks Good!"}):""]})}),s("div",{className:"flex justify-end items-center mt-8",children:[e("button",{type:"submit",className:"btn btn-primary",children:"Verify"}),e("button",{type:"button",className:"btn btn-outline-danger ltr:ml-4 rtl:mr-4",onClick:()=>p(!1),children:"Discard"})]})]})})})]})})})})]})}),e(m,{appear:!0,show:N,as:r.Fragment,children:s(h,{as:"div",open:N,onClose:()=>f(!1),children:[e(m.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0"})}),e("div",{className:"fixed inset-0 bg-[black]/60 z-[999] overflow-y-auto",children:e("div",{className:"flex items-center justify-center min-h-screen px-4",children:e(m.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s(h.Panel,{as:"div",className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg my-8 text-black dark:text-white-dark",children:[s("div",{className:"flex bg-[#fbfbfb] dark:bg-[#121c2c] items-center justify-between px-5 py-3",children:[e("h5",{className:"font-bold text-lg",children:"2Fa Authentication"}),e("button",{type:"button",className:"text-white-dark hover:text-dark",onClick:()=>f(!1),children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",children:[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),s("div",{className:"p-5",children:[e("h5",{className:"text-md",children:"Scan QR In Google Authentocator App"}),e("br",{}),e("center",{children:e("img",{src:S})})]})]})})})})]})})]})]})};export{se as default};
